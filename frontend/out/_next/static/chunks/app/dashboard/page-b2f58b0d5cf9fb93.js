(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6592:function(e,t,s){Promise.resolve().then(s.bind(s,7736))},7736:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var a=s(7437),r=s(2265),l=s(4033);function n(){let[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)([]),[o,c]=(0,r.useState)([]),[d,i]=(0,r.useState)([]),[m,h]=(0,r.useState)(""),[u,p]=(0,r.useState)(!1),[x,g]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),[f,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)(""),[v,k]=(0,r.useState)(""),[S,C]=(0,r.useState)(""),[_,A]=(0,r.useState)("linkedin_post"),[I,z]=(0,r.useState)(""),[O,T]=(0,r.useState)(1),[E,D]=(0,r.useState)([]),[F,B]=(0,r.useState)([]),[P,W]=(0,r.useState)(!1),[G,L]=(0,r.useState)(""),R=(0,l.useRouter)();(0,r.useEffect)(()=>{let e=localStorage.getItem("token"),s=localStorage.getItem("userId");if(!e||!s){R.push("/login");return}t(s),q(e)},[R]);let q=async e=>{try{let t=await fetch("https://electron-backend.carlos-mdtz9.workers.dev/api/workspaces",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();n(e.workspaces||[])}else console.error("Failed to fetch workspaces")}catch(e){console.error("Error fetching workspaces:",e)}},U=async e=>{if(e.preventDefault(),!N.trim())return;W(!0),L("");let t=localStorage.getItem("token");if(t)try{let e=await fetch("https://electron-backend.carlos-mdtz9.workers.dev/api/workspaces",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({name:N})}),s=await e.json();e.ok?(L("Workspace created successfully!"),w(""),p(!1),q(t)):L(s.error||"Failed to create workspace")}catch(e){L("Network error")}finally{W(!1)}},J=async(e,t)=>{try{let s=await fetch("https://electron-backend.carlos-mdtz9.workers.dev/api/analyses?workspace_id=".concat(e),{headers:{Authorization:"Bearer ".concat(t)}});if(s.ok){let e=await s.json();c(e.analyses||[])}else console.error("Failed to fetch analyses")}catch(e){console.error("Error fetching analyses:",e)}},M=async(e,t)=>{try{let s=await fetch("https://electron-backend.carlos-mdtz9.workers.dev/api/characters?workspace_id=".concat(e),{headers:{Authorization:"Bearer ".concat(t)}});if(s.ok){let e=await s.json();i(e.characters||[])}else console.error("Failed to fetch characters")}catch(e){console.error("Error fetching characters:",e)}},V=async()=>{var e;if(!m)return;W(!0),L("");let t=localStorage.getItem("token");if(!t)return;let s=o.find(e=>"completed"===e.status),a=null==s?void 0:null===(e=s.id)||void 0===e?void 0:e.toString();try{let e=await fetch("https://electron-backend.carlos-mdtz9.workers.dev/api/characters",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({workspace_id:parseInt(m),brand_analysis:a})}),s=await e.json();e.ok?(L("Character generation started! Characters will be available shortly."),y(!1),setTimeout(()=>M(m,t),3e3)):L(s.error||"Failed to generate characters")}catch(e){L("Network error")}finally{W(!1)}},$=async(e,t)=>{let s=localStorage.getItem("token");if(s)try{let a=await fetch("https://electron-backend.carlos-mdtz9.workers.dev/api/characters/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({status:t})});if(a.ok)L("Character ".concat(t," successfully!")),M(m,s);else{let e=await a.json();L(e.error||"Failed to update character")}}catch(e){L("Network error")}},Q=async e=>{if(e.preventDefault(),!m||!v.trim())return;W(!0),L("");let t=localStorage.getItem("token");if(t)try{let e=await fetch("https://electron-backend.carlos-mdtz9.workers.dev/api/analyses",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({workspace_id:parseInt(m),url:v,analysis_type:"url"})}),s=await e.json();e.ok?(L("Analysis started! Check back in a few moments for results."),k(""),g(!1),J(m,t)):L(s.error||"Failed to start analysis")}catch(e){L("Network error")}finally{W(!1)}},X=async(e,t)=>{try{let s=await fetch("https://electron-backend.carlos-mdtz9.workers.dev/api/ads?workspace_id=".concat(e),{headers:{Authorization:"Bearer ".concat(t)}});if(s.ok){let e=await s.json();B(e.ads||[])}else console.error("Failed to fetch ads")}catch(e){console.error("Error fetching ads:",e)}},Y=async e=>{if(e.preventDefault(),!m||0===E.length||!I.trim())return;W(!0),L("");let t=localStorage.getItem("token");if(t)try{let e=await fetch("https://electron-backend.carlos-mdtz9.workers.dev/api/ads",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({workspace_id:parseInt(m),character_ids:E,ad_type:_,topic:I,quantity:O})}),s=await e.json();e.ok?(L("Ad generation started! Ads will be available shortly."),z(""),j(!1),setTimeout(()=>X(m,t),5e3)):L(s.error||"Failed to generate ads")}catch(e){L("Network error")}finally{W(!1)}},H=(e,t)=>{t?D(t=>[...t,e]):D(t=>t.filter(t=>t!==e))},K=e=>{h(e);let t=localStorage.getItem("token");t&&(J(e,t),M(e,t),X(e,t))};return e?(0,a.jsxs)("main",{className:"flex min-h-screen",children:[(0,a.jsxs)("div",{className:"w-64 bg-gray-800 text-white p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Workspaces"}),(0,a.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,a.jsx)("button",{onClick:()=>K(e.id.toString()),className:"w-full text-left px-4 py-2 rounded-md hover:bg-gray-700 ".concat(m===e.id.toString()?"bg-gray-700":""),children:e.name},e.id))}),(0,a.jsx)("button",{onClick:()=>p(!0),className:"w-full mt-6 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700",children:"+ New Workspace"})]}),(0,a.jsxs)("div",{className:"flex-1 p-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold",children:"Dashboard"}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("userId"),R.push("/")},className:"bg-red-500 text-white py-2 px-4 rounded-md hover:bg-red-600",children:"Logout"})]}),G&&(0,a.jsx)("p",{className:"mb-4 text-center ".concat(G.includes("successfully")?"text-green-600":"text-red-600"),children:G}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Workspaces"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Manage your marketing workspaces"}),(0,a.jsx)("button",{onClick:()=>p(!u),className:"bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600",children:u?"Cancel":"Create Workspace"})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Brand Discovery"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Analyze brands with AI"}),(0,a.jsx)("button",{onClick:()=>g(!x),className:"bg-green-500 text-white py-2 px-4 rounded-md hover:bg-green-600",children:x?"Cancel":"Start Analysis"})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Brand Voice"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Create AI brand characters"}),(0,a.jsx)("button",{onClick:()=>y(!b),className:"bg-purple-500 text-white py-2 px-4 rounded-md hover:bg-purple-600",children:b?"Cancel":"Generate Characters"})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Ad Creation"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Generate ads using AI characters"}),(0,a.jsx)("button",{onClick:()=>j(!f),className:"bg-orange-500 text-white py-2 px-4 rounded-md hover:bg-orange-600",children:f?"Cancel":"Generate Ads"})]})]}),u&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Create New Workspace"}),(0,a.jsxs)("form",{onSubmit:U,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"workspaceName",className:"block text-sm font-medium mb-1",children:"Workspace Name"}),(0,a.jsx)("input",{type:"text",id:"workspaceName",value:N,onChange:e=>w(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter workspace name"})]}),(0,a.jsx)("button",{type:"submit",disabled:P,className:"bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:P?"Creating...":"Create Workspace"})]})]}),x&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Start Brand Analysis"}),(0,a.jsxs)("form",{onSubmit:Q,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"workspaceSelect",className:"block text-sm font-medium mb-1",children:"Select Workspace"}),(0,a.jsxs)("select",{id:"workspaceSelect",value:m,onChange:e=>K(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,a.jsx)("option",{value:"",children:"Choose a workspace..."}),s.map(e=>(0,a.jsx)("option",{value:e.id.toString(),children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"analysisUrl",className:"block text-sm font-medium mb-1",children:"Website URL"}),(0,a.jsx)("input",{type:"url",id:"analysisUrl",value:v,onChange:e=>k(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"https://example.com"})]}),(0,a.jsx)("button",{type:"submit",disabled:P||!m,className:"bg-green-500 text-white py-2 px-4 rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50",children:P?"Starting Analysis...":"Start Analysis"})]})]}),b&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Generate Brand Voice Characters"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"This will generate 3 unique AI characters based on your brand analysis. Make sure you have completed a brand analysis first for better results."}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Selected Workspace"}),(0,a.jsxs)("select",{value:m,onChange:e=>K(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,a.jsx)("option",{value:"",children:"Choose a workspace..."}),s.map(e=>(0,a.jsx)("option",{value:e.id.toString(),children:e.name},e.id))]})]}),(0,a.jsx)("button",{onClick:V,disabled:P||!m,className:"bg-purple-500 text-white py-2 px-4 rounded-md hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50",children:P?"Generating Characters...":"Generate Characters"})]})]}),f&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Generate Marketing Ads"}),(0,a.jsxs)("form",{onSubmit:Y,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Ad Type"}),(0,a.jsxs)("select",{value:_,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,a.jsx)("option",{value:"linkedin_post",children:"LinkedIn Post"}),(0,a.jsx)("option",{value:"twitter",children:"Twitter/X Post"}),(0,a.jsx)("option",{value:"email",children:"Email Content"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Topic"}),(0,a.jsx)("input",{type:"text",value:I,onChange:e=>z(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter the ad topic or product"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Quantity"}),(0,a.jsx)("input",{type:"number",min:"1",max:"10",value:O,onChange:e=>T(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Select Characters (Approved only)"}),(0,a.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:d.filter(e=>"approved"===e.status).map(e=>(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:E.includes(e.id),onChange:t=>H(e.id,t.target.checked),className:"mr-2"}),(0,a.jsx)("span",{className:"text-sm",children:e.name})]},e.id))}),0===d.filter(e=>"approved"===e.status).length&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:"No approved characters available. Please approve some characters first."})]}),(0,a.jsx)("button",{type:"submit",disabled:P||0===E.length,className:"bg-orange-500 text-white py-2 px-4 rounded-md hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-500 disabled:opacity-50",children:P?"Generating Ads...":"Generate Ads"})]})]}),m&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Analysis Results"}),0===o.length?(0,a.jsx)("p",{className:"text-gray-600",children:"No analyses yet. Start your first analysis above!"}):(0,a.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-md p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h4",{className:"text-lg font-medium",children:e.url}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("completed"===e.status?"bg-green-100 text-green-800":"processing"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),e.ai_analysis&&(0,a.jsx)("div",{className:"bg-gray-50 p-3 rounded",children:(0,a.jsx)("p",{className:"text-sm",children:e.ai_analysis})})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Brand Voice Characters"}),0===d.length?(0,a.jsx)("p",{className:"text-gray-600",children:"No characters yet. Generate characters above!"}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-md p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h4",{className:"text-lg font-medium",children:e.name}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("approved"===e.status?"bg-green-100 text-green-800":"discarded"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),e.personality&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Personality:"}),(0,a.jsx)("p",{className:"text-sm bg-gray-50 p-2 rounded",children:e.personality})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:["pending"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>$(e.id.toString(),"approved"),className:"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600",children:"Approve"}),(0,a.jsx)("button",{onClick:()=>$(e.id.toString(),"discarded"),className:"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600",children:"Discard"})]}),"approved"===e.status&&(0,a.jsx)("span",{className:"text-green-600 text-sm",children:"✓ Approved for use"}),"discarded"===e.status&&(0,a.jsx)("span",{className:"text-red-600 text-sm",children:"✗ Discarded"})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Generated Ads"}),0===F.length?(0,a.jsx)("p",{className:"text-gray-600",children:"No ads generated yet. Create ads above!"}):(0,a.jsx)("div",{className:"space-y-4",children:F.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-md p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-medium",children:e.topic}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.character_name," • ",e.ad_type.replace("_"," ")]})]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm bg-orange-100 text-orange-800",children:e.ad_type.replace("_"," ")})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),(0,a.jsx)("div",{className:"bg-gray-50 p-3 rounded",children:(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content})})]},e.id))})]})]}),s.length>0&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Workspace Details"}),(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-md p-4",children:[(0,a.jsx)("h4",{className:"text-lg font-medium",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Created: ",new Date(e.created_at).toLocaleDateString()]})]},e.id))})]})]})]}):(0,a.jsx)("div",{children:"Loading..."})}},622:function(e,t,s){"use strict";var a=s(2265),r=Symbol.for("react.element"),l=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,s){var a,l={},d=null,i=null;for(a in void 0!==s&&(d=""+s),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(i=t.ref),t)n.call(t,a)&&!c.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===l[a]&&(l[a]=t[a]);return{$$typeof:r,type:e,key:d,ref:i,props:l,_owner:o.current}}t.Fragment=l,t.jsx=d,t.jsxs=d},7437:function(e,t,s){"use strict";e.exports=s(622)},4033:function(e,t,s){e.exports=s(5313)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=6592)}),_N_E=e.O()}]);